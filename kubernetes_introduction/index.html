
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Kuberneteså…¥é–€</title>
  <script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="../elements/codelab.html">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <style is="custom-style">
    body {
      font-family: "Roboto",sans-serif;
      background: var(--google-codelab-background, #F8F9FA);
    }
  </style>
  
</head>
<body unresolved class="fullbleed">

  <google-codelab title="Kuberneteså…¥é–€"
                  environment="web"
                  feedback-link="https://github.com/SpringMT/kubernetes_introduction">
    
      <google-codelab-step label="Introduction" duration="0">
        <p>kubernetesã¯ã„ã‚ã„ã‚ã‚ã£ã¦é›£ã—ã„æ„Ÿã˜ã‚‚ã—ã¾ã™ãŒã€æ‰‹ã‚’å‹•ã‹ã›ã°ç†è§£ã‚‚é€²ã‚€ã¨æ€ã„ã¾ã™ã€‚</p>
<p>ãªã®ã§ã€æ‰‹ã‚’å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>


      </google-codelab-step>
    
      <google-codelab-step label="æº–å‚™ã®æº–å‚™" duration="0">
        <p>æœ¬å½“ã ã£ãŸã‚‰GKEã¨ã‹ã‚’ä½¿ã£ã¦ã¿ãŸã„ã¨ã“ã‚ã§ã™ãŒã€ãŠé‡‘ã‚‚ã‹ã‹ã‚‹ã®ã§ãƒ­ãƒ¼ã‚«ãƒ«ã§kubernetesã‚’å‹•ã‹ã›ã‚‹<a href="https://github.com/kubernetes/minikube" target="_blank">minikube</a>ã‚’ä½¿ã„ã¾ã™ã€‚</p>
<p>minikubeã¯ä¸€ã¤ã®ãƒãƒ¼ãƒ‰ã§å‹•ãkubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’èµ·å‹•ã•ã›ã¾ã™ã€‚</p>
<p>ã•ã¦ã€ã“ã“ã§ã‚‚ã†ã™ã§ã«kubernetesã®å˜èªãŒã„ã‚ã„ã‚ã§ã¦ãã¦ã„ã¦æ··ä¹±ã—å§‹ã‚ã‚‹ã¨ã“ã‚ã§ã—ã‚‡ã†ã€‚</p>
<p>ã¾ãšã¯ã§ã¦ãã‚‹kubernetesç”¨èªã‚’å°‘ã—æ•´ç†ã—ã¾ã™ã€‚</p>
<h2>ç”¨èªã®æ•´ç†</h2>
<p>ç”¨èªã®ä¸€è¦§ã¯ä¸‹è¨˜ã«ã¾ã¨ã¾ã£ã¦ã„ã¾ã™ã€‚</p>
<p><a href="https://kubernetes.io/docs/reference/glossary/" target="_blank">https://kubernetes.io/docs/reference/glossary/</a></p>
<p>ã•ã‚‰ã« <code>kubectl explain</code> ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚è©³ç´°ã‚’çŸ¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ãŸã ã€ã“ã®ãƒšãƒ¼ã‚¸ã‚’èª­ã‚€ã ã‘ã ã¨ã‚ã‘ã‚ã‹ã‚‰ã‚“ã¨æ€ã†ã®ã§ã€ã“ã‚Œã‹ã‚‰é–¢ä¿‚ã‚ã‚Šãã†ãªç”¨èªã‚’æŠœãå‡ºã—ã¦ç°¡å˜ã«ã—ã¦ã¾ã¨ã‚ã¾ã™ã€‚</p>
<h3><a href="https://kubernetes.io/docs/reference/glossary/?all=true#term-cluster" target="_blank">ã‚¯ãƒ©ã‚¹ã‚¿(cluster)</a></h3>
<ul>
<li>kubernetesã«ã‚ˆã£ã¦ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒãƒ¼ãƒ‰ã®é›†åˆã€‚</li>
<li>ã‚¯ãƒ©ã‚¹ã‚¿ã«ã¯ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒãƒ¼ãƒ‰ã¨ä¸€ã¤ä»¥ä¸Šã®ãƒã‚¹ã‚¿ãƒ¼ãƒãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã‚‹ã€‚</li>
</ul>
<h3><a href="https://kubernetes.io/docs/reference/glossary/?all=true#term-node" target="_blank">ãƒãƒ¼ãƒ‰(node)</a></h3>
<ul>
<li>ãƒãƒ¼ãƒ‰ã¯kubernetesã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒã‚·ãƒ³ã§ã€VMã¾ãŸã¯ç‰©ç†ãƒã‚·ãƒ³ãŒä½¿ã‚ã‚Œã¾ã™(ã‚¯ãƒ©ã‚¹ã‚¿ã«ã‚ˆã£ã¦å¤‰ã‚ã‚Šã¾ã™)</li>
<li>ãƒãƒ¼ãƒ‰ã¯ãƒã‚¹ã‚¿ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã‚ˆã£ã¦ç®¡ç†ã•ã‚Œã¾ã™ã€‚</li>
<li>ãƒãƒ¼ãƒ‰ã¯Podã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå‹•ã„ã¦ã„ã¾ã™ã€‚ãƒãƒ¼ãƒ‰ä¸Šã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã®runtime(Dockerã¨ã‹containerdã¨ã‹)ã€kubeletã€kube-proxyãŒã‚ã‚Šã¾ã™ã€‚</li>
<li>ã¤ã¾ã‚Šã€ãƒãƒ¼ãƒ‰ä¸Šã§PodãŒå‹•ãã¾ã™ã€‚</li>
</ul>
<h3><a href="https://kubernetes.io/docs/reference/glossary/?all=true#term-pod" target="_blank">Pod</a></h3>
<ul>
<li>kubernetesã®ä¸­ã«ãŠã„ã¦ã€æœ€ã‚‚å°ã•ãå˜ç´”ãªå˜ä½ã§ã™ã€‚</li>
<li>Podã«ã¯ä¸€ã¤ä»¥ä¸Šã®ã‚³ãƒ³ãƒ†ãƒŠãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã‚³ãƒ³ãƒ†ãƒŠã¯å¿…ãšåŒã˜ãƒãƒ¼ãƒ‰ã«é…ç½®ã•ã‚Œã¾ã™</li>
<li>Podã«å«ã¾ã‚Œã‚‹ã‚³ãƒ³ãƒ†ãƒŠåŒå£«ã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çš„ã«ã¯éš”é›¢ã•ã‚Œã¦ãŠã‚‰ãš(NICã‚’å…±æœ‰)ã€å«ã¾ã‚Œã‚‹ã‚³ãƒ³ãƒ†ãƒŠã¯åŒã˜IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒã¡ã¾ã™ã€‚ã‚ã¨éš”é›¢ã•ã‚Œã¦ã„ãªã„ã®ã§ã€ <code>localhost</code> ã‚’ä½¿ã£ã¦ã‚„ã‚Šã¨ã‚Šã§ãã¾ã™ã€‚</li>
<li>Podã«å«ã¾ã‚Œã‚‹ã‚³ãƒ³ãƒ†ãƒŠåŒå£«ã¯ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’å…±æœ‰ã—ã¾ã™ã€‚</li>
<li>Podã¯å¤šãã®å ´åˆä¸€ã¤ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’å†…åŒ…ã—ã¦ã„ã¾ã™ãŒã€è¤‡æ•°ã‚³ãƒ³ãƒ†ãƒŠã‚’å«ã‚ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚(ã“ã“ã‚‰ã¸ã‚“ã¯ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã‹ã‚¢ãƒ³ãƒã‚µãƒ€ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã‹å‘¼ã°ã‚Œã‚‹ã‚„ã¤)</li>
<li>Podã¯ã ã„ãŸã„ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚’ä½¿ã£ã¦ç®¡ç†ã—ã¾ã™</li>
</ul>
<h3><a href="https://kubernetes.io/docs/reference/glossary/?all=true#term-service" target="_blank">ã‚µãƒ¼ãƒ“ã‚¹(service)</a></h3>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/services-networking/service/" target="_blank">https://kubernetes.io/docs/concepts/services-networking/service/</a> ã“ã¡ã‚‰ã‚‚å‚ç…§</li>
<li>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å…·ç¾åŒ–ã—ã¦ã„ã‚‹Podç¾¤ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®æ–¹æ³•ã‚’ç¤ºã™APIã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™</li>
<li>ã‚¯ãƒ©ã‚¹ã‚¿ã®å†…éƒ¨ã€å¤–éƒ¨ã©ã¡ã‚‰ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã‚¢ã‚¯ã‚»ã‚¹å…ƒã‚’å®šç¾©ã§ãã¾ã™ã€‚</li>
<li>ã‚¢ã‚¯ã‚»ã‚¹å…ˆã®ã¾ã¨ã¾ã‚Šã®å®šç¾©ã«ã¯Labelã‚’ä½¿ã„ã¾ã™ã€‚</li>
<li>è² è·åˆ†æ•£ã®ä»•çµ„ã¿ã‚„ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è¨­å®šã‚‚ã§ãã¾ã™ã€‚(è² è·åˆ†æ•£ã®ä»•çµ„ã¿ã¯ã‚„ã‚„ã“ã—ããªã‚‹ã®ã§åˆ¥ã®æ©Ÿä¼šã«)</li>
<li>kubernetesã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¸Šã§ã‚µãƒ¼ãƒ“ã‚¹ã¨è¨€ã‚ã‚Œã‚‹ã¨ã“ã¡ã‚‰ã‚’æŒ‡ã—ã¾ã™ã€‚ã‚„ã‚„ã“ã—ã„</li>
</ul>
<h3><a href="https://kubernetes.io/docs/concepts/overview/components/" target="_blank">ãƒã‚¹ã‚¿ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ãƒãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</a></h3>
<ul>
<li>ãƒã‚¹ã‚¿ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ç®¡ç†ã«å¿…è¦ãªã‚‚ã®</li>
<li>ãƒãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯å®Ÿè¡Œä¸­ã®Podã‚’ç¶­æŒã—kubernetesã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ç’°å¢ƒã‚’æä¾›ã™ã‚‹ã‚‚ã®</li>
</ul>
<p>ã“ã“ã¾ã§ããŸã‚‰å®Ÿéš›ã«æ‰‹ã‚’å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>


      </google-codelab-step>
    
      <google-codelab-step label="æº–å‚™" duration="0">
        <p>macã‚’ä½¿ã£ã¦ã„ã‚‹å‰æã§è©±ã‚’é€²ã‚ã¾ã™ã€‚</p>
<p>ä¸‹è¨˜ã®ãƒªãƒ³ã‚¯ã®æ‰‹é †ã‚’ã»ã¼ãã®ã¾ã¾ä½¿ã£ã¦ã„ã¾ã™ã€‚</p>
<p><a href="https://kubernetes.io/docs/tasks/tools/install-minikube/" target="_blank">https://kubernetes.io/docs/tasks/tools/install-minikube/</a></p>
<h2>Hypervisorã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>
<p><a href="https://ja.wikipedia.org/wiki/%E3%83%8F%E3%82%A4%E3%83%91%E3%83%BC%E3%83%90%E3%82%A4%E3%82%B6" target="_blank">Hypervisor</a>ã¨ã¯ï¼Ÿ</p>
<table>
<tr><td colspan="1" rowspan="1"><p>VirtualBox</p>
</td><td colspan="1" rowspan="1"><p><a href="https://www.virtualbox.org/wiki/Downloads" target="_blank">https://www.virtualbox.org/wiki/Downloads</a></p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>VMware Fusion </p>
</td><td colspan="1" rowspan="1"><p><a href="https://www.vmware.com/products/fusion" target="_blank">https://www.vmware.com/products/fusion</a></p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Hyperkit</p>
</td><td colspan="1" rowspan="1"><p><a href="https://github.com/moby/hyperkit" target="_blank">https://github.com/moby/hyperkit</a></p>
</td></tr>
</table>
<p>ã¡ãªã¿ã«è‡ªåˆ†ã¯VirtualBoxã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚</p>
<h2>minikubeã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>
<p>brewçµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™</p>
<pre>% brew cask install minikube</pre>
<h2>kubectlã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>
<p>gcloud SDK 237.0.0ã«ã‚ˆã£ã¦kubectlã®ç®¡ç†ãŒå‰ã«æ¯”ã¹ã¦åŠ‡çš„ã«ã‚ˆããªã‚Šã¾ã—ãŸã€‚</p>
<p>kubectlã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯v1.11.7ã«ãªã‚Šã€ã•ã‚‰ã«ã€è¤‡æ•°ã®kubectlã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚å«ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚(<code>kubectl.1.9</code> <code>kubectl.1.10</code> <code>kubectl.1.11</code> <code>kubectl.1.12</code> <code>kubectl.1.13</code> ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒå«ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚) </p>
<p>ã‚‚ã†brewã«é ¼ã‚‹å¿…è¦ã¯ãªã„ã®ã§ã™ï¼</p>
<h3>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•</h3>
<p>ä¸‹è¨˜ã«å¾“ã£ã¦gcloud SDKã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ã‚‡ã†ã€‚</p>
<p><a href="https://cloud.google.com/sdk/docs/quickstart-macos?hl=en" target="_blank">https://cloud.google.com/sdk/docs/quickstart-macos?hl=en</a></p>
<p>gcloud SDKãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚Œã°gcloudã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã¨æ€ã†ã®ã§ã€gcloudã‚³ãƒãƒ³ãƒ‰çµŒç”±ã§kubectlã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre>% gcloud components install kubectl
% kubectl version
Client Version: version.Info{Major:&#34;1&#34;, Minor:&#34;11&#34;, GitVersion:&#34;v1.11.7&#34;, GitCommit:&#34;65ecaf0671341311ce6aea0edab46ee69f65d59e&#34;, GitTreeState:&#34;clean&#34;, BuildDate:&#34;2019-01-24T19:32:00Z&#34;, GoVersion:&#34;go1.10.7&#34;, Compiler:&#34;gc&#34;, Platform:&#34;darwin/amd64&#34;}
Server Version: version.Info{Major:&#34;1&#34;, Minor:&#34;13&#34;, GitVersion:&#34;v1.13.3&#34;, GitCommit:&#34;721bfa751924da8d1680787490c54b9179b1fed0&#34;, GitTreeState:&#34;clean&#34;, BuildDate:&#34;2019-02-01T20:00:57Z&#34;, GoVersion:&#34;go1.11.5&#34;, Compiler:&#34;gc&#34;, Platform:&#34;linux/amd64&#34;}</pre>
<p>æ¥½ãªæ™‚ä»£ã«ãªã£ãŸã‚‚ã®ã ã€‚</p>
<h2><a href="https://github.com/ahmetb/kubectx" target="_blank">kubectx</a>ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>
<p>ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®åˆ‡ã‚Šæ›¿ãˆãŒæ¥½ã«ãªã‚‹ã®ã§ã„ã‚Œã¦ãŠãã¨ã‚ˆã„ã‹ã¨æ€ã„ã¾ã™ã€‚</p>
<pre>% brew install kubectx</pre>
<h2>sternã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>
<p>sternã¯kubernetesã®ãƒ­ã‚°ã‚’è¦‹ã‚‹ãŸã‚ã«ã¯ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ãªã®ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p>
<p>brewçµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚</p>
<pre>% brew install stern</pre>
<p>ã“ã“ã¾ã§ãã‚Œã°æº–å‚™ã¯OKã ã¨æ€ã„ã¾ã™ã€‚</p>
<p>ãã‚Œã§ã¯å®Ÿéš›ã«minikubeã‚’èµ·å‹•ã•ã›ã¦kubernetesã®ä¸–ç•Œã«å…¥ã£ã¦ã¿ã¾ã—ã‚‡ã†</p>


      </google-codelab-step>
    
      <google-codelab-step label="minikubeã®èµ·å‹•" duration="0">
        <pre>% minikube start</pre>
<p>å‹•ã‹ãªã‹ã£ãŸå ´åˆã®å¯¾å¿œ</p>
<p>è‡ªåˆ†ã®å ´åˆã¯ <code>Error restarting cluster: restarting kube-proxy: waiting for kube-proxy to be up for configmap update: timed out waiting for the condition ãŒã§ã¦ã€ä¸‹è¨˜ã®ç”¨ã«å¯¾å¿œã—ã¾ã—ãŸã€‚</code></p>
<pre># ã¨ã‚Šã‚ãˆãšæ½°ã—ã¦ã‚‚å•é¡Œãªã•ãã†ã§ã‚ã‚Œã°
% minikube delete
% minikube start
# å‹•ã„ãŸï¼</pre>
<p>minikubeãŒèµ·å‹•ã§ãã¦ãŸã‚‰ã€kubernetesã‚’è§¦ã‚‹æº–å‚™ã¯ä¸‡å…¨ã§ã™ã€‚</p>
<p>kubectxã‚’ä½¿ã£ã¦ã©ã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ“ä½œã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ï¼</p>
<p>minikubeèµ·å‹•ç›´å¾Œã§ã¯ã€minikubeã‚¯ãƒ©ã‚¹ã‚¿ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p>
<pre>% kubectx
minikube</pre>
<p>ç‰¹ã«ã¾ã ãªã«ã‚‚ã—ã¦ã„ãªã„ã®ã§ã€Podã¨ã‹ã‚‚ä¸ŠãŒã£ã¦ãªã„ã§ã™ã€‚</p>
<p>ãƒãƒ¼ãƒ‰ã¯ã„ã¾ã™ã€‚</p>
<pre>% kubectl get nodes
NAME       STATUS    ROLES     AGE       VERSION
minikube   Ready     master    42m       v1.13.3
% kubectl get pods
No resources found.</pre>


      </google-codelab-step>
    
      <google-codelab-step label="Podã‚’ç«‹ã¦ã¦ã¿ã‚‹" duration="0">
        <p>kubernetesã®ã‚µãƒ³ãƒ—ãƒ«ã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯<a href="https://github.dena.jp/KubernetesFriday/nouhau" target="_blank">kubernetes_introduction</a>ã«ãŠã„ã¦ãŠãã¾ã—ãŸã€‚</p>
<p>cloneã—ã¦ä½¿ã„ã¾ã™ã€‚</p>
<pre>% git clone https://github.com/SpringMT/kubernetes_introduction.git
% cd kubernetes_introduction/manifests</pre>
<p>ã§ã¯Podã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<p><code>kubectl apply</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã„ã¾ã™ã€‚</p>
<p>äº‹å‰ã« <code>kubectx</code> ã§ã‚¯ãƒ©ã‚¹ã‚¿ãŒminikubeã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãŠã„ã¦ãã ã•ã„ï¼</p>
<pre>% kubectl apply -f step1/pod.yaml
pod/introduction-web created
% kubectl get pods
NAME               READY     STATUS    RESTARTS   AGE
introduction-web   1/1       Running   0          22s</pre>
<p>ãŠãŠãŠã€ç„¡äº‹ç«‹ã¡ä¸ŠãŒã£ã¦ã„ã¾ã™ã€‚</p>
<p>Podã®è©³ç´°ã‚‚ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<pre>% kubectl describe pods introduction-web
Name:               introduction-web
Namespace:          default
Priority:           0
PriorityClassName:  &lt;none&gt;
Node:               minikube/10.0.2.15
Start Time:         Tue, 05 Mar 2019 16:16:32 +0900
Labels:             app=web
Annotations:        kubectl.kubernetes.io/last-applied-configuration={&#34;apiVersion&#34;:&#34;v1&#34;,&#34;kind&#34;:&#34;Pod&#34;,&#34;metadata&#34;:{&#34;annotations&#34;:{},&#34;labels&#34;:{&#34;app&#34;:&#34;web&#34;},&#34;name&#34;:&#34;introduction-web&#34;,&#34;namespace&#34;:&#34;default&#34;},&#34;spec&#34;:{&#34;container...
Status:             Running
IP:                 172.17.0.6
Containers:
  web:
    Container ID:   docker://828586eb578dade41a1ba49accabd7981e9ffe22086c67eef1a23356d41f6baa
    Image:          nginx
    Image ID:       docker-pullable://nginx@sha256:e2048a115f51d61fa589f5f592f677300f1c122de07904e0ebefe44a6a89da23
    Port:           &lt;none&gt;
    Host Port:      &lt;none&gt;
    State:          Running
      Started:      Tue, 05 Mar 2019 16:16:50 +0900
    Ready:          True
    Restart Count:  0
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-kgtlz (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-kgtlz:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-kgtlz
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  &lt;none&gt;
Tolerations:     node.kubernetes.io/not-ready:NoExecute for 300s
                 node.kubernetes.io/unreachable:NoExecute for 300s
Events:
  Type    Reason     Age   From               Message
  ----    ------     ----  ----               -------
  Normal  Scheduled  22m   default-scheduler  Successfully assigned default/introduction-web to minikube
  Normal  Pulling    22m   kubelet, minikube  pulling image &#34;nginx&#34;
  Normal  Pulled     22m   kubelet, minikube  Successfully pulled image &#34;nginx&#34;
  Normal  Created    22m   kubelet, minikube  Created container
  Normal  Started    22m   kubelet, minikube  Started container</pre>
<p>ã„ã‚ã„ã‚ã§ã¦ãã¾ã—ãŸã­ã€‚</p>
<p>ã¾ã‚ã€ã„ã¾ã®ã¨ã“ã‚ã¯ã‚¹ãƒ«ãƒ¼ã§å¤§ä¸ˆå¤«ã§ã™ã€‚</p>
<p><code>kubectl get</code> ã‚„ <code>kubectl describe</code> ã®ä½¿ã„æ–¹ã‚’æ‰‹ã«ãªã˜ã¾ã›ã¦ãã ã•ã„ã€‚</p>
<p>sternã‚’ä½¿ã£ã¦ãƒ­ã‚°ã‚‚ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<p>sternã¯ <code>tail -f</code> ã½ããƒ­ã‚°ã‚’æµã—ã¦ãã‚Œã¾ã™ã€‚</p>
<pre>% stern introduction
+ introduction-web â€º web</pre>
<p>PodãŒã§ãã¦ã„ã‚‹ãƒ­ã‚°ãã‚‰ã„ã—ã‹ç¢ºèªã§ããªã„ã§ã™ãŒã€ãƒ­ã‚°ãŒã§ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‹ã‚Šã¾ã—ãŸã€‚</p>
<p><code>kubectl logs introduction-web</code>  ã§ã‚‚ãƒ­ã‚°ã¯ç¢ºèªã§ãã¾ã™ã€‚(ã“ã®å ´åˆãªã«ã‚‚ãƒ­ã‚°ã¯ã§ã¦ãã¾ã›ã‚“ã€‚ã¡ãªã¿ã«ã€ sternã®ã‚ˆã†ã« <code>tail -f</code> ã®ã‚ˆã†ã«ãƒ­ã‚°ãŒæµã™ã“ã¨ã¯ã§ããªã„ã§ã™)</p>
<aside class="special"><p>2019/03/06è¿½è¨˜</p>
<p>2019/2/26ã«mergeã•ã‚ŒãŸä¸‹è¨˜PRã«ã‚ˆã£ã¦ã€ã§ãã‚‹ã‚ˆã†ã«ãƒ©ãƒ™ãƒ«ã®æŒ‡å®šã®çµ„ã¿åˆã‚ã›ã§ <code>tail -f</code> ç›¸å½“ã«ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p>
<p><a href="https://github.com/kubernetes/kubernetes/pull/67573" target="_blank">https://github.com/kubernetes/kubernetes/pull/67573</a></p>
<p><code>kubectl logs -l app=logging_test --all-containers -f ã“ã‚“ãªæ„Ÿã˜ã§æŒ‡å®šã§ãã‚‹ã½ã„ã§ã™ã€‚</code></p>
</aside>
<h3>dashboardã‚’ä½¿ã£ã¦ã¿ã‚‹</h3>
<p>kuberenetesã®dashboardã§ã‚‚ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<p>kubernetesã«ãªã‚Œãªã„ã†ã¡ã¯dashboardã‚’ä½¿ã£ã¦GUIã§ç¢ºèªã™ã‚‹ã¨ãªã«ã‹ã¨ç†è§£ã—ã‚„ã™ã„ã‹ã¨æ€ã„ã¾ã™ã€‚</p>
<p>ãŸã ã—æœ¬ç•ªç’°å¢ƒã§dashboardæ©Ÿèƒ½ã‚’onã«ã™ã‚‹å ´åˆã¯æ°—ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚</p>
<p>ã“ã‚“ãªäº‹ä¾‹ã‚‚ã‚ã‚Šã¾ã™ã€‚</p>
<p><a href="https://redlock.io/blog/cryptojacking-tesla" target="_blank">https://redlock.io/blog/cryptojacking-tesla</a></p>
<p>GKEã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ã€ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œã‚‹éš›ã«dashboaræ©Ÿèƒ½ã‚’offã«ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚‹ã®ã§(ã©ãƒ•ã‚©ãƒ«ãƒˆoff)ã€ã“ã‚Œã‚’ä½¿ã£ã¦offã«ã™ã‚‹ã¨ã‚ˆã„ã‹ã¨æ€ã„ã¾ã™ã€‚</p>
<p><img style="max-width: 513.50px" src="img/f10a04bce42313fd.png"></p>
<p>minikubeã®å ´åˆã¯ã€ <code>minikube dashboard</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã„ã¾ã™ã€‚</p>
<pre>% minikube dashboard
ğŸ”Œ  Enabling dashboard ...
ğŸ¤”  Verifying dashboard health ...
ğŸš€  Launching proxy ...
ğŸ¤”  Verifying proxy health ...
ğŸ‰  Opening http://127.0.0.1:59459/api/v1/namespaces/kube-system/services/http:kubernetes-dashboard:/proxy/ in your default browser...</pre>
<p>minikubeä»¥å¤–ã®å ´åˆã¯ã“ã¡ã‚‰ã‚’å‚ç…§ãã ã•ã„ã€‚</p>
<p><a href="https://github.com/kubernetes/dashboard" target="_blank">https://github.com/kubernetes/dashboard</a></p>
<p>dashboardã¯ã“ã‚“ãªæ„Ÿã˜ã«ãªã£ã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p>
<p><img style="max-width: 573.50px" src="img/8f6a7e8a4d31ed08.png"></p>
<p><code>kubectl get</code> ã‚„ <code>kubectl describe</code> ã§å–å¾—ã§ãã‚‹æƒ…å ±ã¨åŒç­‰ã®æƒ…å ±ãŒç¢ºèªã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚</p>
<h3>Podã‚’å‰Šé™¤ã™ã‚‹</h3>
<p>å‰Šé™¤ã™ã‚‹æ–¹æ³•ã¯2ã¤ã‚ã‚Šã¾ã™ã€‚</p>
<pre>% kubectl delete pods introduction-web</pre>
<p>or</p>
<pre>% kubectl delete -f step1/pod.yaml</pre>
<p>åŸºæœ¬çš„ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ã‚‚ã‚Œãªãå‰Šé™¤ã§ãã‚‹ã®ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«æŒ‡å®šã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚</p>
<p>å¿µã®ç‚ºå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã‚‚ã—ã¾ã—ã‚‡ã†</p>
<pre>% kubectl get pods
No resources found.</pre>


      </google-codelab-step>
    
      <google-codelab-step label="é€šä¿¡ã§ãã‚‹Podã‚’ä½œã£ã¦é€šä¿¡ã—ã¦ã¿ã‚‹" duration="0">
        <p>step1ã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã†ã¨ã€ã©ã“ã«ã‚‚ãƒãƒ¼ãƒˆãŒç©ºã„ã¦ã„ãªã„çŠ¶æ…‹ãªã®ã§ã€å˜ç´”ã«ä¸ŠãŒã£ã¦ã„ã‚‹ã ã‘ã®Podã«ãªã‚Šã¾ã™ã€‚</p>
<p>ã§ã¯ã€é€šä¿¡ã§ãã‚‹Podã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<p>ä»Šåº¦ã¯step2ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å«ã¾ã‚Œã‚‹ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ä½¿ã„ã¾ã™ã€‚</p>
<pre># kubectxã§ã‚¯ãƒ©ã‚¹ã‚¿ã®ç¢ºèªã‚’å¿˜ã‚Œãšã«ï¼
% kubectx
% kubectl apply -f step2/pod.yaml
pod/introduction-web created
% kubectl get pods
NAME               READY     STATUS    RESTARTS   AGE
introduction-web   1/1       Running   0          76s</pre>
<p>ã‚¯ãƒ©ã‚¹ã‚¿å†…ã§80ç•ªãƒãƒ¼ãƒˆãŒç©ºã„ã¦ã„ã‚‹PodãŒä¸ŠãŒã‚Šã¾ã™ã€‚</p>
<p>ã“ã®ã¾ã¾ã§ã¯ã€ã‚¯ãƒ©ã‚¹ã‚¿å¤–ã‹ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã€‚</p>
<p>ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã‚‹æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ãŒã€ã‚µãƒ¼ãƒ“ã‚¹çµŒç”±ã®è¨­å®šã¯ã‚ã¨ã«ã¾ã‚ã—ã¦ã€ä»Šå›ã¯ä¸€æ—¦ç‰¹å®šã®Podã¨é€šä¿¡ã§ãã‚‹ã‚ˆã†ã«ã§ãã‚‹ã‚ˆã†ã«ãƒ—ãƒ­ã‚­ã‚·ã™ã‚‹æ–¹æ³•ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¾ã™ã€‚</p>
<p>ãƒ­ãƒ¼ã‚«ãƒ«ã®8080ç•ªãƒãƒ¼ãƒˆã§Podã®ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦è©¦ã—ã¦ã¿ã¾ã™ã€‚</p>
<pre>% kubectl port-forward introduction-web 8080:80
Forwarding from 127.0.0.1:8080 -&gt; 80
Forwarding from [::1]:8080 -&gt; 80</pre>
<p>http://localhost:8080/ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<p><img style="max-width: 619.50px" src="img/f0e05dcf4a2a34ad.png"></p>
<p>ãƒ­ã‚°ã‚‚è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<pre>% stern introduction-web
+ introduction-web â€º web
introduction-web web 127.0.0.1 - - [05/Mar/2019:09:04:26 +0000] &#34;GET / HTTP/1.1&#34; 200 612 &#34;-&#34; &#34;curl/7.54.0&#34; &#34;-&#34;
introduction-web web 127.0.0.1 - - [05/Mar/2019:09:04:39 +0000] &#34;GET / HTTP/1.1&#34; 200 612 &#34;-&#34; &#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36&#34; &#34;-&#34;
introduction-web web 2019/03/05 09:04:39 [error] 7#7: *2 open() &#34;/usr/share/nginx/html/favicon.ico&#34; failed (2: No such file or directory), client: 127.0.0.1, server: localhost, request: &#34;GET /favicon.ico HTTP/1.1&#34;, host: &#34;localhost:8080&#34;, referrer: &#34;http://localhost:8080/&#34;
introduction-web web 127.0.0.1 - - [05/Mar/2019:09:04:39 +0000] &#34;GET /favicon.ico HTTP/1.1&#34; 404 555 &#34;http://localhost:8080/&#34; &#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36&#34; &#34;-&#34;</pre>
<p>ç„¡äº‹ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã—ãŸï¼</p>
<p>PodãŒä¸€ã¤ã§ã‚ã‚Œã°ã“ã‚Œãã‚‰ã„ã§ãªã‚“ã¨ã‹ãªã‚Šã¾ã™ãŒã€ç¾å®Ÿã¯ãã‚“ãªè¨³ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p>1Podã¯ä»Šã¾ã§ã®1ãƒ—ãƒ­ã‚»ã‚¹ã«å½“ãŸã‚‹ãã‚‰ã„ã®æœ€å°ã®å˜ä½ã§ã™ã€‚</p>
<p>ç¾å®Ÿã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é‹ç”¨ã™ã‚‹ã«ã¯ã€è¤‡æ•°ã®ç¨®é¡ã®Podã¾ã¨ã‚ã¦ç®¡ç†ã™ã‚‹å¿…è¦ãŒã§ã¦ãã¾ã™ã€‚</p>
<p>ãã‚Œã‚’å®Ÿç¾ã™ã‚‹ã®ãŒReplicaSetã¨Deploymentã§ã™ã€‚</p>
<p>æ¬¡ã«è¡Œãå‰ã«ç«‹ã¡ä¸Šã’ãŸPodã‚’ãŠæƒé™¤ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p>
<pre>% kubectl delete -f step2/pod.yaml
pod &#34;introduction-web&#34; deleted
% kubectl get pods
No resources found.</pre>


      </google-codelab-step>
    
      <google-codelab-step label="ReplicaSet" duration="0">
        <p>ã“ã“ã‹ã‚‰kubernetesã½ããªã£ã¦ãã¾ã™ã€‚</p>
<p>ã¡ã‚‡ã£ã¨ã“ã“ã§kuberenetesã®å¼·ã¿ã«ã¤ã„ã¦å°‘ã—ãŠè©±ã—ã¾ã™ã€‚</p>
<p>ä»Šã¾ã§ã®Podã®ç«‹ã¡ä¸Šã’ã«ãŠã„ã¦ã€æ›¸ã„ã¦ã„ã‚‹ã®ã¯yamlã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã§ã™ã€‚</p>
<p>ã“ã®è¨˜è¿°å†…å®¹ã¯ä½•ãŒå¿…è¦ã‹ã ã‘ã‚’è¨˜è¼‰ã—ã¦ã„ã‚‹ã„ã‚ã‚†ã‚‹å®£è¨€çš„ãªã‚³ãƒ¼ãƒ‰ã«ãªã£ã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚kubernetesã¯ã“ã®å®£è¨€çš„ãªã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ç®¡ç†ãŒã§ãã‚‹ã“ã¨ã§ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ã‚„ç®¡ç†ã‚’è‡ªå‹•åŒ–ã—ã‚„ã™ã„ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚kubernetesã®å¼·ã¿ã®ä¸€ã¤ã¯ã“ã†ã—ãŸå®£è¨€çš„ãªã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ç®¡ç†ãŒã§ãã‚‹ç‚¹ã«ã‚ã‚Šã¾ã™ã€‚</p>
<p>ã‚‚ã¡ã‚ã‚“kubernetesã®å¼·ã¿ã¯ã“ã‚Œã ã‘ã‚ã‚‹ã¯ãšãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p>ã“ã“ã§ã€ReplicaSetã®è©±ã«æˆ»ã—ã¾ã™ã€‚</p>
<p>ReplicaSetã¯kubernetesã®åˆ¥ã®å¼·ã¿ã§ã‚ã‚‹ã€ã‚»ãƒ«ãƒ•ãƒ’ãƒ¼ãƒªãƒ³ã‚°ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚</p>
<p>ReplicaSetã¯å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹Podã®æ•°ã‚’ä¿è¨¼ã™ã‚‹ä»•çµ„ã¿ã§ã™ã€‚</p>
<p>ReplicaSetã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹Podã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å…ƒã«Podã®ãƒ¬ãƒ—ãƒªã‚«(è¤‡è£½)ã‚’æŒ‡å®šã•ã‚ŒãŸæ•°ã«ä¸€è‡´ã™ã‚‹ã‚ˆã†ã«ç®¡ç†ã—ã¦ãã‚Œã¾ã™ã€‚</p>
<p>ã§ã¯å®Ÿéš›ã«è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<aside class="special"><p>kubernetesã®å¼·ã¿ã«ã¤ã„ã¦</p>
<p>kubernetesã®å¼·ã¿ã¯ã ã„ãŸã„7ã¤ã®é …ç›®ã«ãªã‚Šã¾ã™(Kuberneteså®Œå…¨ã‚¬ã‚¤ãƒ‰ã‚ˆã‚Š)</p>
<ul>
<li>å®£è¨€çš„ãªã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ç®¡ç†(Infrastructure as Code, IaC)</li>
<li>ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãƒ»ã‚ªãƒ¼ãƒˆã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°</li>
<li>ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°</li>
<li>ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†</li>
<li>ã‚»ãƒ«ãƒ•ãƒ’ãƒ¼ãƒªãƒ³ã‚°</li>
<li>ã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªã¨ãƒ­ãƒ¼ãƒ‰ãƒ»ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°</li>
<li>ãƒ‡ãƒ¼ã‚¿ç®¡ç†</li>
</ul>
<p>ãã‚Œãã‚Œã«ã¤ã„ã¦ã¯åˆ¥ã®æ©Ÿä¼šã«ç´¹ä»‹ã§ãã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p>
</aside>
<h2>ReplicaSetã®ä½œæˆ</h2>
<p>ã§ã¯ReplicaSetã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†</p>
<p>ä»Šå›ã¯3ã¤ã®Podã‚’ä¸Šã’ã¾ã™ã€‚</p>
<pre># ã‚¯ãƒ©ã‚¹ã‚¿ã®ç¢ºèªã‚’å¿˜ã‚Œãšã«ï¼
% kubectx
% kubectl apply -f step3/replica_set.yaml
replicaset.apps/intro-rs created
% kubectl get pods
NAME             READY     STATUS    RESTARTS   AGE
intro-rs-2wqvw   1/1       Running   0          27s
intro-rs-brllz   1/1       Running   0          27s
intro-rs-mwdjv   1/1       Running   0          27s
# ä¸€å€‹æ¶ˆã—ã¦ã¿ã‚‹
% kubectl delete pod intro-rs-2wqvw
# ã™ãã«3å€‹ã«ãªã‚‹ã‚ˆã†ã«PodãŒã§ãã‚‹
% kubectl get pods
NAME             READY     STATUS              RESTARTS   AGE
intro-rs-7zhxh   0/1       ContainerCreating   0          4s # &lt;- New!!
intro-rs-brllz   1/1       Running             0          2m1s
intro-rs-mwdjv   1/1       Running             0          2m1s</pre>
<p>PodãŒä¸€æ™‚çš„ã«è½ã¡ã¦ã‚‚ã™ãã«æ–°ã—ã„PodãŒå‡ºæ¥ä¸ŠãŒã‚‹æ§˜å­ãŒä¼ºãˆã¾ã™ã€‚</p>
<p>ã•ã¦ã€ReplicaSetãŒPodã®ã‚»ãƒ«ãƒ•ãƒ’ãƒ¼ãƒªãƒ³ã‚°ã‚’æä¾›ã—ã¦ãã‚ŒãŸã‚ã‘ã§ã™ãŒã€ã“ã‚Œã«ã‚ˆã£ã¦è€éšœå®³æ€§ãŒä¸ŠãŒã‚Šä¸‡ã€…æ­³ã¨ã¯ãªã‚Šã¾ã›ã‚“ã€‚ã€‚</p>
<p>ReplicaSetã¯ã‚ãã¾ã§Podã®ãƒ¬ãƒ—ãƒªã‚«ã‚’ä½œã‚ŠæŒ‡å®šã•ã‚ŒãŸæ•°ã¶ã‚“ã®Podã‚’ç«‹ã¡ä¸Šã’ç¶šã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ç®¡ç†ã™ã‚‹ã ã‘ã§ã™ã€‚</p>
<p>ReplicaSetå˜ä½ã§ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯æä¾›ã—ã¦ãã‚Œã¾ã›ã‚“ã€‚</p>
<p>ReplicaSetã‚„ã•ã‚‰ã«ã¯Podã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’æä¾›ã—ã¦ãã‚Œã‚‹ä»•çµ„ã¿ãŒDeploymentã«ãªã‚Šã¾ã™ã€‚</p>
<p>æ¬¡ã«è¡Œãå‰ã«ç«‹ã¡ä¸Šã’ãŸReplicaSetã‚’ãŠæƒé™¤ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p>
<pre>% kubectl delete -f step3/replica_set.yaml
replicaset.apps &#34;intro-rs&#34; deleted
% kubectl get pods
No resources found.</pre>


      </google-codelab-step>
    
      <google-codelab-step label="Deployment" duration="0">
        <p>Deploymentã¯ReplicaSetã¨Podã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’æ‹…å½“ã—ã¾ã™ã€‚</p>
<p>Deploymentã¯ReplocaSetã‚’ç®¡ç†ã—ã€ReplicaSetãŒPodã‚’ä½œæˆã—ãŸã‚Šã—ã¾ã™ã€‚</p>
<p>å®Ÿéš›ã¯ã“ã®Deploymentã‚’ä½¿ã†ã“ã¨ãŒã»ã¨ã‚“ã©ã§ã€ReplicaSetã‚„Podã‚’ç›´æ¥ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã§å®šç¾©ã™ã‚‹ã“ã¨æ»…å¤šã«ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p>æœ€åˆã‹ã‚‰ã“ã‚Œã‚’èª¬æ˜ã—ã‚ã‚ˆæ„ŸãŒã‚ã‚Šã¾ã™ãŒã€ã¾ã‚ã€Podã‚„ReplicaSetã‚’èª¬æ˜ã—ãªã„ã¨åˆ†ã‹ã‚Šã¥ã‚‰ã„ã¨æ€ã£ãŸã®ã§ã“ã“ã¾ã§å¼•ã£å¼µã‚Šã¾ã—ãŸã€‚</p>
<p>Deploymentã¯ReplicaSetã«ã‚ˆã£ã¦ç®¡ç†ã•ã‚Œã‚‹Podã®æ•°ã‚’ä¿ã¡ãªãŒã‚‰ã€Podã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ä»•çµ„ã¿ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</p>
<p>ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã®æ–¹æ³•ã®ç‰¹å¾´ã—ã¦RollingUpdateãŒã‚ã‚Šã¾ã™ã€‚</p>
<p>æ–°ã—ã„Podã‚’ä¸€å®šæ•°ã¤ãã‚ŠãªãŒã‚‰ã€å¤ã„Podã‚’ãã®åˆ†ã ã‘å‰Šé™¤ã—ã¦ã„ãã€åŠ¹ç‡ã‚ˆãã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’è¡Œã†ä»•çµ„ã¿ã§ã™ã€‚</p>
<p>ã“ã®ä»•çµ„ã¿ã‚’ä½¿ã£ã¦Blue-Green-Deploymentã‚‚å®Ÿç¾å¯èƒ½ã§ã™ã€‚</p>
<h2>Deploymentã®ä½œæˆ</h2>
<p>ã§ã¯å®Ÿéš›ã«Deploymentã‚’ä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<pre># ã‚¯ãƒ©ã‚¹ã‚¿ã®ç¢ºèªã‚’å¿˜ã‚Œãšã«ï¼
% kubectx
% kubectl apply -f step4/deployment.yaml
deployment.apps/intro-deploy created
% kubectl get pods
NAME                            READY     STATUS    RESTARTS   AGE
intro-deploy-78bd57c9c9-79trj   1/1       Running   0          12s
intro-deploy-78bd57c9c9-99mzp   1/1       Running   0          12s
intro-deploy-78bd57c9c9-l6sxw   1/1       Running   0          12s
% kubectl get deploy
NAME           READY     UP-TO-DATE   AVAILABLE   AGE
intro-deploy   3/3       3            3           19s
# é…å¸ƒã™ã‚‹imageã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¤‰ãˆã¦applyã—ã¦ã¿ã‚‹
% kubectl apply -f step4/deployment.yaml
deployment.apps/intro-deploy configured
% kubectl get deploy
NAME           READY     UP-TO-DATE   AVAILABLE   AGE
intro-deploy   2/3       3            2           92s
# å…¥ã‚Œæ›¿ãˆä¸­
% kubectl get pods
NAME                            READY     STATUS              RESTARTS   AGE
intro-deploy-5d77889745-9scnz   0/1       ContainerCreating   0          5s
intro-deploy-5d77889745-jslth   0/1       ContainerCreating   0          5s
intro-deploy-5d77889745-lnznf   0/1       ContainerCreating   0          5s
intro-deploy-78bd57c9c9-79trj   1/1       Running             0          95s
intro-deploy-78bd57c9c9-99mzp   1/1       Running             0          95s
intro-deploy-78bd57c9c9-l6sxw   0/1       Terminating         0          95s
# å…¥ã‚Œæ›¿ãˆå®Œäº†
% kubectl get pods
NAME                            READY     STATUS    RESTARTS   AGE
intro-deploy-5d77889745-9scnz   1/1       Running   0          73s
intro-deploy-5d77889745-jslth   1/1       Running   0          73s
intro-deploy-5d77889745-lnznf   1/1       Running   0          73s</pre>
<p><code>kubectl set image deployment/intro-deploy nginx=nginx:1.15</code> ã®ã‚ˆã†ã« <code>kubectl set image</code> ã§imageã‚’å…¥ã‚Œã‹ãˆã‚‹ã“ã¨ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚</p>
<p>Deploymentã¾ã§ã§ã€ã ã„ãŸã„Podã®ç®¡ç†ã«ã¤ã„ã¦ã¯çµ‚ã‚ã‚Šã§ã™ã€‚</p>
<p>ãŠæƒé™¤ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p>
<pre>% kubectl delete -f step4/deployment.yaml
deployment.apps &#34;intro-deploy&#34; deleted</pre>


      </google-codelab-step>
    
      <google-codelab-step label="Service" duration="0">
        <p>ã•ã¦ã€ã“ã“ã¾ã§ã§Podã‚’ã©ã†ã‚„ã£ã¦ä¸€ã¤ã«ã¾ã¨ã‚ã¦é‹ç”¨ã™ã‚‹ã‹ã«ã¤ã„ã¦ã‚’è¦‹ã¦ãã¾ã—ãŸã€‚</p>
<p>Podä¸Šã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã—ã¦ã„ã¦ã‚‚ã€ãã‚Œã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã‘ã‚Œã°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä½¿ãˆãªã„ã§ã™ã­ã€‚</p>
<p>kubernetesã®å†…éƒ¨çš„ã«ã¯PodåŒå£«ãŒé€šä¿¡ã§ãã‚‹ã‚ˆã†ã«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãŒã§ãã¦ã„ã¾ã™ã€‚</p>
<p>é€šä¿¡è‡ªä½“ã¯å¯èƒ½ãªã®ã§ã€è‡ªåˆ†ã§Podé–“ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’åˆ¶å¾¡ã™ã‚‹ãªã«ã‹ã‚’ä½œã£ã¦åˆ¶å¾¡ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ã€‚</p>
<p>ã§ã™ãŒã€ãã‚“ãªã“ã¨ã‚’ã—ãªãã¦ã‚‚ã€kubernetesãŒã¡ã‚ƒã‚“ã¨ç”¨æ„ã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚</p>
<p>ãã‚ŒãŒServiceã§ã™ã€‚</p>
<p>Serviceã¯è² è·åˆ†æ•£ã¨ã‹ã„ã‚ã„ã‚ã‚ã‚Šã¾ã™ãŒã€è¦ã¯Labelã®ã‚»ãƒ¬ã‚¯ã‚¿ã‚’ä½œã‚‹ä»•çµ„ã¿ãŒæœ¬è³ªã ã¨æ€ã„ã¾ã™ã€‚</p>
<p>Podã®Labelã‚’æŒ‡å®šã—ã¦ã²ã¨ã¾ã¨ã‚ã«ã—ã¦ã€ãã®LabelãŒã¤ã„ã¦ã„ã‚‹Podã«å¯¾ã—ã¦ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’æµã™ã®ãŒServiceã®å½¹å‰²ã«ãªã‚Šã¾ã™ã€‚</p>
<p>ã“ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’æµã™ã¨ã„ã†ä»•çµ„ã¿ãŒè² è·åˆ†æ•£ã®ä»•çµ„ã¿ã«ãªã‚Šã€ã“ã®è² è·åˆ†æ•£ã®ä»•çµ„ã¯kubernetesã¯è¤‡æ•°ç”¨æ„ã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚</p>
<p>ã¾ãŸãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã®åˆ¶å¾¡ã¨ã„ã†è¦³ç‚¹ã‹ã‚‰ã€Podã®Probeã¨é€£æºã—ã¦æ­£å¸¸ãªçŠ¶æ…‹ã®Podã«å¯¾ã—ã¦ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’æµã™ã¨ã„ã†ä»•çµ„ã¿ã‚‚å‚™ãˆã¦ã„ã¾ã™ã€‚</p>
<p>ã§ã¯ã€Serviceã‚’å®Ÿéš›ã«è§¦ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<h2>ClusterIP typeã§ã®Serviceã®ä½œæˆ</h2>
<p>Serviceã¨Deploymentã¯å¯†æ¥ã«é–¢ã‚ã£ã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ã®ã§ã€è‡ªåˆ†ã®å ´åˆã¯1ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ã¦ç®¡ç†ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚</p>
<p>ã¾ãšã¯ClusterIP typeã§Serviceã‚’ã¤ãã£ã¦è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<p>ClusterIPã¯Serviceã®ä¸­ã§ã¯ä¸€ç•ªãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ãªServiceã¨ã„ã£ã¦ã„ã„ã§ã—ã‚‡ã†ã€‚</p>
<p>ClusterIPã¯ã‚¯ãƒ©ã‚¹ã‚¿å†…ã®å†…éƒ¨IPã§Serviceã‚’ä½œã‚Šã€ã‚¯ãƒ©ã‚¹ã‚¿å†…ã‹ã‚‰ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚</p>
<p>ã§ã¯è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<pre># ã‚¯ãƒ©ã‚¹ã‚¿ã®ç¢ºèªã‚’å¿˜ã‚Œãšã«ï¼
% kubectx
% kubectl apply -f step5/service_deployment.yaml
service/intro-api created
deployment.apps/intro-deploy created
% kubectl get pods
NAME                            READY     STATUS    RESTARTS   AGE
intro-deploy-78bd57c9c9-hsrsx   1/1       Running   0          4m45s
intro-deploy-78bd57c9c9-sg9cn   1/1       Running   0          4m45s
intro-deploy-78bd57c9c9-whzdc   1/1       Running   0          4m45s
% kubectl get deploy
NAME           READY     UP-TO-DATE   AVAILABLE   AGE
intro-deploy   3/3       3            3           4m48s
% kubectl get service
NAME         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
intro-api    ClusterIP   10.104.231.157   &lt;none&gt;        8080/TCP   4m51s
kubernetes   ClusterIP   10.96.0.1        &lt;none&gt;        443/TCP    23h</pre>
<p>ã‚‚ã¡ã‚ã‚“ã“ã‚Œã§ã¯ã‚¯ãƒ©ã‚¹ã‚¿å¤–ã‹ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã€ã€ã€</p>
<p>ã‚¯ãƒ©ã‚¹ã‚¿ã®ä¸­ã®Podã«ä¸€ã¤ã«å…¥ã£ã¦ã¿ã¦è©¦ã—ã¦è¦‹ã¾ã—ã‚‡ã†ã€‚</p>
<aside class="special"><p>Serviceã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒä½œã‚‰ã‚Œã‚‹ã¨ã€kuberneteså†…éƒ¨ã®DNSã«{:service name}.{namespaceå}.svc.cluster.localã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒç™ºè¡Œã•ã‚Œã¾ã™ã€‚</p>
</aside>
<pre>% kubectl exec -it intro-deploy-78bd57c9c9-hsrsx -- /bin/bash
root@intro-deploy-78bd57c9c9-hsrsx:/# apt-get update
root@intro-deploy-78bd57c9c9-hsrsx:/# apt-get install -y curl
root@intro-deploy-78bd57c9c9-hsrsx:/# curl 10.104.231.157:8080 #ä½•å›ã‚‚å©ã„ã¦ã¿ã‚‹
# Serviceã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒä½œã‚‰ã‚Œã‚‹ã¨ã€kuberneteså†…éƒ¨ã®DNSã«{:service name}.{namespaceå}.svc.cluster.localã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒç™ºè¡Œã•ã‚Œã‚‹
root@intro-deploy-78bd57c9c9-hsrsx:/# curl intro-api.default.svc.cluster.local:8080</pre>
<p>ãã†ã™ã‚‹ã¨ãƒ­ã‚°ãŒã“ã‚“ãªæ„Ÿã˜ã§ã§ã¾ã™ã€‚</p>
<p><img style="max-width: 864.00px" src="img/cd22d07ca0d10abb.png"></p>
<p>ã‚»ãƒ¬ã‚¯ã‚¿ã§æŒ‡å®šã•ã‚ŒãŸPodã«åˆ†æ•£ã—ã¦ã„ã‚‹æ§˜å­ãŒè¦‹ãˆã¾ã™ã€‚(curlã‚’å©ã„ã¦ã‚‹Podã«ã¯ã‚¢ã‚¯ã‚»ã‚¹ã¯è¡Œã‹ãªã„æ¨¡æ§˜)</p>
<p>ä½œã£ãŸServiceã¯æ¶ˆã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p>
<pre>% kubectl delete -f step5/service_deployment.yaml</pre>
<h2>NodePortã‚’ä½¿ã£ã¦å¤–éƒ¨ã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹Serviceã‚’ä½œã‚‹</h2>
<p>NodePortã¯ã‚¯ãƒ©ã‚¹ã‚¿ä¸Šã®<strong>å…¨ã¦ã®</strong>ãƒãƒ¼ãƒ‰ä¸Šã®æŒ‡å®šã—ãŸãƒãƒ¼ãƒˆã«åˆ°é”ã—ãŸãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’Podã«æµã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ãªã®ã§ã€ãƒãƒ¼ãƒ‰ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚Œã°ã€ã‚¯ãƒ©ã‚¹ã‚¿å¤–ã‹ã‚‰ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚‚Podã¸æµã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ã§ã¯æ—©é€ŸNodePortã®Serviceã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<pre># ã‚¯ãƒ©ã‚¹ã‚¿ã®ç¢ºèªã‚’å¿˜ã‚Œãšã«ï¼
% kubectx
% kubectl apply -f step6/service_deployment.yaml
service/intro-api created
deployment.apps/intro-deploy created
% kubectl get pod
NAME                            READY     STATUS    RESTARTS   AGE
intro-deploy-78bd57c9c9-gh5jg   1/1       Running   0          46s
intro-deploy-78bd57c9c9-gngdf   1/1       Running   0          46s
intro-deploy-78bd57c9c9-qcstn   1/1       Running   0          46s
% kubectl get deploy
NAME           READY     UP-TO-DATE   AVAILABLE   AGE
intro-deploy   3/3       3            3           49s
% kubectl get service
NAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
intro-api    NodePort    10.104.75.252   &lt;none&gt;        8080:30080/TCP   53s
kubernetes   ClusterIP   10.96.0.1       &lt;none&gt;        443/TCP          24h</pre>
<p>ã“ã‚“ãªæ„Ÿã˜ã§ä½œã‚‰ã‚Œã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p>
<p>ã§ã¯minikubeã®ã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒãƒ¼ãƒ‰ã®æƒ…å ±ãŒã‚ã‹ã‚Œã°ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã­ï¼</p>
<p>æœ€åˆã«æ›¸ã„ãŸé€šã‚Šminikubeã¯ãƒãƒ¼ãƒ‰ãŒ1ã¤ãªã®ã§ã€ãƒãƒ¼ãƒ‰ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚‚1ã¤ã§ã™ã€‚</p>
<p>ç¢ºèªæ–¹æ³•ã¯ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã§ã§ãã¾ã™ã€‚</p>
<pre>% minikube ip
192.168.99.100</pre>
<p>ãŠãŠãŠã€ã“ã‚ŒãŒminikubeã§ã¯ãƒãƒ¼ãƒ‰ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ä¸€è‡´ã—ã¾ã™ã€‚</p>
<p>ã§ã¯ã“ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«å‘ã‘ã¦ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<p>sternã§ãƒ­ã‚°ã‚’å‡ºã™ã®å¿˜ã‚Œãšã«ï¼</p>
<pre>% curl 192.168.99.100:30080</pre>
<p>sternã®ãƒ­ã‚°ã¯ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ï¼</p>
<p><img style="max-width: 864.00px" src="img/9ba892d67409977d.png"></p>
<p>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ¥ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p>
<p>ã“ã‚Œã§Serviceã«é–¢ã—ã¦ã¯å…¥é–€ã¨ã—ã¦ã¯ååˆ†ã‹ã¨æ€ã„ã¾ã™ï¼</p>
<p>ã¯ä½œã£ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¶ˆã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p>
<pre>% kubectl delete -f step6/service_deployment.yaml 
service &#34;intro-api&#34; deleted
deployment.apps &#34;intro-deploy&#34; deleted</pre>


      </google-codelab-step>
    
      <google-codelab-step label="Serviceã¨Ingress" duration="0">
        <p>Serviceã®å½¹å‰²ã‚’æ•´ç†ã™ã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚(Kuberneteså®Œå…¨ã‚¬ã‚¤ãƒ‰ p194ã‚ˆã‚Š)</p>
<ul>
<li>ãƒ©ãƒ™ãƒ«ã‚’åˆ©ç”¨ã—ãŸPodã®ã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒª(Podã®ã¾ã¨ã‚å½¹)</li>
<li>L4ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°</li>
<li>ã‚¯ãƒ©ã‚¹ã‚¿å†…ã®DNSã«ã‚ˆã‚‹åå‰è§£æ±º</li>
</ul>
<p>æ˜¨ä»Šã®HTTPã‚µãƒ¼ãƒãƒ¼ã‚’é‹ç”¨ã™ã‚‹ã«ã¯Serviceã§ã¯ä¸è¶³ã—ã¦ã„ã‚‹éƒ¨åˆ†ãŒã‚ã‚Šã¾ã™ã€‚</p>
<p>ãã“ã§L7ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã‚’è¡Œã†IngressãŒã‚ã‚Šã¾ã™ã€‚</p>
<p>Ingressã¯Serviceã¨ã‚‚é€£æºã—ã¦ä¸‹è¨˜ã®ã‚ˆã†ãªã“ã¨ã§ãã¾ã™(å®Ÿè£…æ¬¡ç¬¬ã§ã„ã‚ã„ã‚ã§ãã¾ã™)ã€‚</p>
<ul>
<li>L7ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°</li>
<li>HTTPSçµ‚ç«¯</li>
<li>ãƒ‘ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</li>
</ul>
<p>ã©ã‚Œã‚’ä½¿ã†ã¹ãã‹ã¯ä¸€ç•ªã®æ‚©ã¿ã”ã¨ã ã¨æ€ã„ã¾ã™ã€‚</p>
<p><a href="https://medium.com/google-cloud/kubernetes-nodeport-vs-loadbalancer-vs-ingress-when-should-i-use-what-922f010849e0" target="_blank">https://medium.com/google-cloud/kubernetes-nodeport-vs-loadbalancer-vs-ingress-when-should-i-use-what-922f010849e0</a></p>
<p>Serviceã®ClusterIPã¨NodePortã¯å‰ã§èª¬æ˜ã—ãŸé€šã‚Šã§ã™ã€‚</p>
<p>LoadBalancerã¯ã€å¤–éƒ¨ã«Serviceã‚’å…¬é–‹ã™ã‚‹ãŸã‚ã«ã¯ä¸€èˆ¬çš„ãªæ–¹æ³•ã§ã™ã€‚</p>
<p>LoadBalancerã¯åŸºæœ¬çš„ã«ã¯ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒæä¾›ã—ã¦ã„ã‚‹ã—ã¦ã„ã‚‹ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ãŒä½¿ã‚ã‚Œã¾ã™ã€‚</p>
<p>GKEã ã¨TCPã®ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ãŒä½œæˆã•ã‚Œã¾ã™ã€‚</p>
<p>Lï¼”ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ãªã®ã§ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãªã©ã¯ãªã„ã§ã™ã­ã€‚</p>
<p>ã•ã‚‰ã«Serviceã”ã¨ã«ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ãŒã§ãã‚‹ã®ã§ã€ãŠé‡‘ã‹ã‹ã‚Šã¾ã™ã€‚</p>
<p>Ingressã¯Serviceã®ã‚¿ã‚¤ãƒ—ã§ã¯ãªã„ã§ã™ã€‚</p>
<p>Ingressã¯è¤‡æ•°ã®Serviceã‚’ã¾ã¨ã‚ã¦ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ãã‚Œã¾ã™ã€‚</p>
<p>GKEã®ingressã¯HTTP(S)ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã‚’ä½¿ã„ã¾ã™ã€‚</p>
<p>ã“ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã¯vhostçš„ãªæ„Ÿã˜ã§ã€ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ã—ã¦ãã‚Œã¾ã™ã€‚</p>
<p>Ingressã¯ä¸€ã¤ã®IPã§è¤‡æ•°ã®Serivceã‚’å…¬é–‹ã—ãŸã‚Šã™ã‚‹ã«ã¯ã¨ã¦ã‚‚ä¾¿åˆ©ã§ã™ã€‚</p>
<p>ä»–ã«ã‚‚SSLã®çµ‚ç«¯å‡¦ç†ãªã©ã®ã„ã‚ã„ã‚ä¾¿åˆ©ãªæ©Ÿèƒ½ã¯ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã”ã¨ã«æä¾›ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ç¢ºèªã—ã¦ä½¿ã„ã¾ã—ã‚‡ã†ã€‚</p>
<p>ä»Šå›ã¯å…¥é–€ã¨ã„ã†ã“ã¨ã§ã“ã‚Œä»¥ä¸Šã¯æ·±æ˜ã‚Šã—ãªã„ã®ã§ã™ãŒã€ãœã²æœ¬ãªã©ã‚’èª­ã‚“ã§ç†è§£ã‚’æ·±ã‚ã¦ãã ã•ã„ã€‚</p>


      </google-codelab-step>
    
      <google-codelab-step label="ã¾ã¨ã‚" duration="0">
        <p>kubernetesã®å…¥é–€ã¨ã„ã†ã“ã¨ã§ã€ã–ã£ãã‚Šã¨kubernetesã«ã¤ã„ã¦ç´¹ä»‹ã—ã¦ãã¾ã—ãŸã€‚</p>
<p>kubernetesã¯å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p>
<p>ã“ã‚Œã‚’æ©Ÿä¼šã«ã•ã‚‰ã«æ·±æ˜ã‚Šã‚’ã—ã¦ã„ã£ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
<p>kubernetesã‚’ä½¿ã£ã¦æœ¬ç•ªé‹ç”¨ã‚’è¡Œã†ã«ã¯ã¾ã ã¾ã ã‚„ã‚‰ãªã‘ã‚Œã°ãªã‚‰ãªã„ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚</p>
<p>ä»–ã«ã‚‚ãƒã‚¿ãŒã‚Œã°@spring_mtã¾ã§ãŠçŸ¥ã‚‰ã›ãã ã•ã„ï¼</p>


      </google-codelab-step>
    
      <google-codelab-step label="å‚è€ƒã«ã™ã‚‹ã¨è‰¯ã„è¨˜äº‹ãƒ»æœ¬" duration="0">
        <h2>æœ¬</h2>
<ul>
<li><a href="https://www.amazon.co.jp/Kubernetes%E5%AE%8C%E5%85%A8%E3%82%AC%E3%82%A4%E3%83%89-impress-top-gear-%E9%9D%92%E5%B1%B1/dp/4295004804/" target="_blank">Kuberneteså®Œå…¨ã‚¬ã‚¤ãƒ‰</a></li>
<li>è¾æ›¸çš„ã«ä½¿ãˆã‚‹ä¸€å®¶ã«ä¸€å†ŠãŠã„ã¦ãŠã‘ã‚‹æœ¬</li>
<li><a href="https://www.amazon.co.jp/%E3%81%97%E3%81%8F%E3%81%BF%E3%81%8C%E3%82%8F%E3%81%8B%E3%82%8BKubernetes-Azure%E3%81%A7%E5%8B%95%E3%81%8B%E3%81%97%E3%81%AA%E3%81%8C%E3%82%89%E5%AD%A6%E3%81%B6%E3%82%B3%E3%83%B3%E3%82%BB%E3%83%97%E3%83%88%E3%81%A8%E5%AE%9F%E8%B7%B5%E7%9F%A5%E8%AD%98-%E9%98%BF%E4%BD%90-%E5%BF%97%E4%BF%9D/dp/4798157848/" target="_blank">ã—ãã¿ãŒã‚ã‹ã‚‹Kubernetes Azureã§å‹•ã‹ã—ãªãŒã‚‰å­¦ã¶ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¨å®Ÿè·µçŸ¥è­˜</a></li>
<li>kubernetesã‚’åŸºç¤ã‹ã‚‰å­¦ã¹ã‚‹ã€‚è¦‹ç›´ã—ãŸã‘ã©ã€ã‚³ãƒ¼ãƒ‰ã‚’è¿½ãˆã‚‹ã»ã©ã§ã¯ãªã‹ã£ãŸã€‚ã€‚ã€‚</li>
<li><a href="https://www.amazon.co.jp/Kubernetes%E5%AE%9F%E8%B7%B5%E5%85%A5%E9%96%80-%E3%83%97%E3%83%AD%E3%83%80%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%AC%E3%83%87%E3%82%A3%E3%81%AA%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A-%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9-Software-plus%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA/dp/4297104385/" target="_blank">Kuberneteså®Ÿè·µå…¥é–€ ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ¬ãƒ‡ã‚£ãªã‚³ãƒ³ãƒ†ãƒŠ&amp;ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œã‚Šæ–¹</a></li>
<li>ã¾ã èª­ã‚“ã§ãªã„ã‘ã©ã€Z Labã®äººãŸã¡ãŒæ›¸ã„ãŸæœ¬ãªã®ã§æœŸå¾…å¤§</li>
</ul>
<h2>Webä¸Šã®è¨˜äº‹</h2>
<p><a href="https://qiita.com/apstndb/items/9d13230c666db80e74d0" target="_blank">GKE/Kubernetes ã§ãªãœ Pod ã¨é€šä¿¡ã§ãã‚‹ã®ã‹</a></p>


      </google-codelab-step>
    
      <google-codelab-step label="å®Œæˆå¾Œã®å°è©±" duration="0">
        <p>2019/03/05ã‚ˆã‚Šå‰ã®è©±</p>
<p>å¤šåˆ†GCPä½¿ã£ã¦ã„ã‚‹äººãŒã»ã¨ã‚“ã©ã ã¨æ€ã†ã®ã§ã€gcloudçµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸããªã‚‹ã“ã¨ã§ã—ã‚‡ã†ã€‚</p>
<p>gcloudçµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€ãªã‚“ã¨ã€v1.10.7ã®kubectlãŒãµã£ã¦ãã¾ã™ã€‚å¤ã™ãã‚‹ã€‚</p>
<p>ã¨ã„ã†ã‚ã‘ã§ã€brewçµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚(v1.10ç³»ã‚’ä½¿ã£ã¦ã¦CronJobå‘¨ã‚Šã§ãªã«ã‹è¸ã‚“ã æ°—ã‚‚ã™ã‚‹ã‘ã©ã€å¿˜ã‚ŒãŸã€‚ã€‚ã€‚)</p>
<p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•</p>
<pre>% brew install kubernetes-cli
# ã“ã‚Œã ã¨gcloudã§ã‚‚kubectlã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€èª­ã¿è¾¼ã¿ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¨ã‚ã§gcloudã®ã»ã†ãŒå„ªå…ˆã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹
% vim ~/.zshrc
# ã“ã‚Œã‚’æ›¸ã„ã¦ãŠã„ã¦ã‚‚ã„ã„ã‹ã‚‚
alias kubectl=&#34;/usr/local/Cellar/kubernetes-cli/{ãƒãƒ¼ã‚¸ãƒ§ãƒ³}/bin/kubectl&#34;</pre>
<p>brewã¨gcloudã®ä¸¡æ–¹ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã¨ã€ </p>
<pre><code>gcloud components update</code></pre>
<p> ã™ã‚‹ã“ã‚“ãªWarningãŒã§ã¦ã†ã–ã„ã§ã™ã€‚ã€‚ã€‚</p>
<pre>WARNING:   There are older versions of Google Cloud Platform tools on your system PATH.
  Please remove the following to avoid accidentally invoking these old tools:

  /Users/foo/go_appengine/endpointscfg.py
/Users/foo/go_appengine/dev_appserver.py
/usr/local/Cellar/kubernetes-cli/1.11.2/bin/kubectl</pre>


      </google-codelab-step>
    
  </google-codelab>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49880327-14', 'auto');

    (function() {
      var gaCodelab = '';
      if (gaCodelab) {
        ga('create', gaCodelab, 'auto', {name: 'codelab'});
      }

      var gaView;
      var parts = location.search.substring(1).split('&');
      for (var i = 0; i < parts.length; i++) {
        var param = parts[i].split('=');
        if (param[0] === 'viewga') {
          gaView = param[1];
          break;
        }
      }
      if (gaView && gaView !== gaCodelab) {
        ga('create', gaView, 'auto', {name: 'view'});
      }
    })();
  </script>

</body>
</html>
